version: '2'
services:
  arquillian-cube-wildfly-test:
    build: src/test/resources/
    environment:
      - MYSQL_URI=arquillian-cube-mysql-test:3306
    ports:
      - "58080:8080"
      - "59990:9990"
    depends_on:
      - arquillian-cube-mysql-test
    networks:
      - arquillian-cube-test-network

  arquillian-cube-mysql-test:
    image: library/mysql:5.7.20
    environment:
      - MYSQL_ALLOW_EMPTY_PASSWORD=true
      - MYSQL_DATABASE=test
    ports:
      - "53306:3306"
    networks:
      - arquillian-cube-test-network

networks:
  arquillian-cube-test-network:
    driver: bridge